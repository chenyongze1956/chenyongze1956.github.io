<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>日历转换与演禽术</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    
    <style>


@keyframes rainbow-color-change {
    0%, 100% { color: #ff0000; } /* Red */
    14% { color: #ff8b00; } /* Orange */
    28% { color: #e8ff00; } /* Yellow */
    42% { color: #5dff00; } /* Green */
    56% { color: #00b9ff; } /* Blue */
    70% { color: #5d00ff; } /* Indigo */
    84% { color: #e800ff; } /* Violet */
}
        
        /* 1. 全屏渐变背景，固定不动 */
        html {
            height: 100%;
            background: linear-gradient(45deg, #ff7e5f, #feb47b, #ffed86, #9feb8f, #5fbfff, #9b8eff);
            background-attachment: fixed;

        }

      h2{



      }
        p{



        }

        /* 2. BODY 变成全屏的 Flex 容器 */
        body {
            /* 移除 max-width 和 margin，让 body 覆盖整个视口 */
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background-color: transparent; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            
            /* 启用 Flexbox 并居中所有内容 */
            display: flex;
            justify-content: center; /* 水平居中 */
            align-items: center;     /* 垂直居中 */
            text-align: center;
                                animation: rainbow-color-change 3s linear infinite alternate;

        }

        /* 3. 结果容器样式：固定宽度，在 Flex 容器中居中 */
        #result {
            /* 设置最大宽度，确保在移动端不会超过屏幕 */
            max-width: 500px; 
            width: 90%; /* 在移动端至少占据 90% 宽度 */
            padding: 20px;
            
            /* 移除重复的渐变背景，改为白色以提高可读性 */
            background: linear-gradient(45deg, #ff7e5f, #feb47b, #ffed86, #9feb8f, #5fbfff, #9b8eff);
            color: #333; /* 确保文字颜色 */
            
            /* 样式和布局 */
            text-align: left; 
            border: 1px solid #ccc;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            /* z-index 确保它在最上层 */
            z-index: 10;

        }

        #result h2 {
            text-align: center; 
            color: #1a1a1a;
            border-bottom: 2px solid #ddd;
            padding-bottom: 10px;
            margin-top: 0;
        }

        hr {
            border: 0;
            border-top: 1px dashed #ccc;
        }
        
        /* 隐藏最外层的 H1/P 标签，让 #result 成为唯一居中的内容块 */
        .header-info {
             display: none; 
        }
    </style>
</head>
<body>
    <div id="result"></div> 
    
    <script type="module">
        // 确保浏览器重新加载 calendar.js
        import { Calendar } from './calendar.js?v=999'; 
        
        // 测试日期 (今日日期: 2025年12月13日)
        const y = 2025;
        const m = 12;
        const d = 13;

        const resultDiv = document.getElementById('result');
        
        if (resultDiv) { 
            
            // --- 开始计算 ---
            const data = Calendar.solarToLunar(y, m, d);
            
            // 节日信息
            let festivalDisplay = ''; 
            if (data.solarFestival) {
                festivalDisplay += `公历节日: **${data.solarFestival}**<br>`;
            }
            if (data.lunarFestival) {
                festivalDisplay += `农历节日: **${data.lunarFestival}**<br>`;
            }
            if (!festivalDisplay) {
                festivalDisplay = '今日无节日信息。<br>';
            }
            
            // --- 输出结果到页面 ---
            resultDiv.innerHTML = `
                <h2>演禽术推算</h2>
                <p style="text-align: center; color: #555;">公历日期: ${y}年${m}月${d}日</p>
                
                <hr style="margin: 15px 0;">
                
                <h3>基本历法信息</h3>
                公历: **${data.solarYear}年${data.solarMonth}月${data.solarDay}日** (星期${data.weekDay})<br>
                农历: **${data.lunarYear}年** (${data.cYear}年, ${data.zodiac}年)<br>
                农历日期: **${data.cMonth}月 ${data.cDay}** ${data.isLeap ? '(闰月)' : ''}<br>
                <br>
                ${festivalDisplay}
                <hr>                                
                
                <h3>推算详情</h3>
                当日干支: **${data.dayJiaZi}**<br>
                当日纳音: **${data.dayNaYin}**<br>
                当日星宿: **${data.starMansion}宿**<br>
                <br>
                推算结果: **${data.yanyingShu}**
            `;
            
        } else {
            console.error("致命错误：未能找到 ID 为 'result' 的 DOM 元素。");
        }
    </script>
</body>
</html>